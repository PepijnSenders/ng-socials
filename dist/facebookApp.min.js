"use strict";var facebookApp=angular.module("facebookApp",[]);socialFacebookApp.directive("socialFacebook",["$rootScope","Facebook","$log","FacebookEmitter",function(e,r,o,t){return{scope:{options:"=socialFacebook"},link:function(e,n,i){n.on("click",function(){e.$apply(function(){e[i.ngClick.replace(/\(\)|\;/g,"")]()})}),e.login=function(){r.getLoginStatus().then(function(e){t.broadcast("login",!0,e)})["catch"](function(n){o.error(n.error),r.login(e.options).then(function(e){t.broadcast("login",!0,e)})["catch"](function(e){o.error(e.error),t.broadcast("login",!1,e)})})},e.share=function(){r.share({url:e.options.url}).then(function(e){t.broadcast("share",!0,e)})["catch"](function(e){t.broadcast("share",!1,e)})},e.logout=function(){r.getLoginStatus().then(function(){r.logout().then(function(e){t.broadcast("logout",!0,e)})["catch"](function(e){t.broadcast("logout",!1,e)})})["catch"](function(){t.broadcast("logout",!0,response)})}}}}]),socialFacebookApp.service("Facebook",["$rootScope","$q","FacebookScriptLoader","$log","$timeout",function(e,r,o,t,n){this.getMe=function(){var e=r.defer();return o.attach().then(function(r){r.api("/me",function(r){"error"in r?e.reject({error:r.error}):"email"in r?e.resolve({email:r.email,id:r.id}):e.reject({error:"No email"})})}),e.promise},this.getPermissions=function(){var e=r.defer();return o.attach().then(function(r){r.api("/me/permissions",function(r){"error"in r?e.reject({error:r.error}):e.resolve(r.data)})}),e.promise},this.getUserLikesPage=function(e,n){var i=r.defer();return o.attach().then(function(r){r.api("/"+e+"/likes/"+n,function(e){"error"in e?i.reject({error:e.error}):t.info(e)})}),i.promise},this.getLoginStatus=function(){var e=r.defer(),t="connected";return o.attach().then(function(r){r.getLoginStatus(function(r){"error"in r?e.reject({error:r.error}):r.status===t?e.resolve(r.authResponse):e.reject({error:"Status is "+r.status})})}),e.promise},this.share=function(e){var t=r.defer();return o.attach().then(function(r){r.ui({method:"share",href:e.url},function(e){"error"in e?t.reject({error:e.error,code:e.error_code}):t.resolve(e)})}),t.promise},this.logout=function(){var e=r.defer();return o.attach().then(function(r){r.logout(function(r){"error"in r?e.reject({error:r.error}):n(function(){e.resolve(r)})})}),e.promise},this.login=function(){var e=void 0!==arguments[0]?arguments[0]:{},t=r.defer();return o.attach().then(function(r){r.login(function(e){"error"in e?t.reject({error:e.error}):e.authResponse?t.resolve(e.authResponse):t.reject({error:"User cancelled login"})},e)}),t.promise},this.getProfilePicture=function(){var e=void 0!==arguments[0]?arguments[0]:"large",t=r.defer();return o.attach().then(function(r){r.api("/me/picture?type="+e,function(e){"error"in e?t.reject({error:e.error}):"data"in e&&"is_silhouette"in e.data?t.resolve(e.data):t.reject({error:"No picture"})})}),t.promise}}]),socialFacebookApp.factory("FacebookEmitter",["$rootScope",function(e){var r=function(e){return"social.facebook."+e},o={broadcast:function(o,t,n){e.$broadcast(r(o),{success:t,response:n})},get:function(e){return r(e)}};return o}]),socialFacebookApp.factory("FacebookScriptLoader",["APP_ID","$q","$window",function(e,r,o){var t=r.defer(),n=!1,i={fb:null,attach:function(){if(n)return t.promise;var e=document.createElement("script");return e.type="text/javascript",e.src="//connect.facebook.net/en_US/sdk.js",document.body.appendChild(e),n=!0,t.promise},initialize:function(){i.fb=o.FB,i.fb.init({appId:e,cookie:!0,version:"v2.0"}),t.resolve(i.fb)}};return o.fbAsyncInit=i.initialize,i}]);
//# sourceMappingURL=facebookApp.min.js.map