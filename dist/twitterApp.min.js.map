{"version":3,"sources":["__generated__/twitterApp.js","directives/socialTwitter.js","services/Twitter.js","services/TwitterEmitter.js","services/TwitterScriptLoader.js"],"names":["twitterApp","angular","module","socialTwitterApp","directive","Twitter","$window","TwitterEmitter","scope","options","link","el","loadWidget","parentNode","urlParameters","key","encoded","encodeURIComponent","push","urlParametersString","join","url","setAttribute","bind","e","target","broadcast","service","TwitterScriptLoader","this","eventName","cb","attach","then","twttr","events","widgets","load","factory","$rootScope","_createEventName","success","response","$broadcast","get","$q","attachDeferred","defer","attached","promise","d","s","id","js","fjs","getElementsByTagName","t","getElementById","createElement","src","insertBefore","_e","ready","f","document","initialize","resolve"],"mappings":"AAAA,YAAA,IAAAA,YAAAC,QAAAC,OAAA,gBCAAC,kBAAAC,UAAA,iBAAA,UAAA,UAAA,iBAAA,SAAAC,EAAAC,EAAAC,GAEA,OACAC,OACAC,QAAA,kBAEAC,KAAA,SAAAF,EAAAG,GACAN,EAAAO,WAAAD,EAAA,GAAAE,WACA,IAAAC,KACA,KAAA,GAAAC,KAAAP,GAAAC,QAAA,CACA,GAAAO,GAAAV,EAAAW,mBAAAT,EAAAC,QAAAM,GACAD,GAAAI,KAAAH,EAAA,IAAAC,GAEA,GAAAG,GAAAL,EAAAM,KAAA,KAEAC,EAAA,oCAAAF,CACAR,GAAA,GAAAW,aAAA,OAAAD,GACAhB,EAAAkB,KAAA,QAAA,SAAAC,GACAA,EAAAC,SAAAd,EAAA,IACAJ,EAAAmB,UAAA,SAAA,EAAAF,UCnBArB,iBAAAwB,QAAA,WAAA,sBAAA,iBAAA,UAAA,SAAAC,GAEAC,KAAAN,KAAA,SAAAO,EAAAC,GACAH,EAAAI,SAAAC,KACA,SAAAC,GACAA,EAAAC,OAAAZ,KAAAO,EAAAC,MAIAF,KAAAjB,WAAA,SAAAD,GACAiB,EAAAI,SAAAC,KACA,SAAAC,GACAA,EAAAE,QAAAC,KAAA1B,SCZAR,iBAAAmC,QAAA,kBAAA,aAAA,SAAAC,GAEA,GAAAC,GAAA,SAAAzB,GACA,MAAA,kBAAAA,GAGAR,GACAmB,UAAA,SAAAX,EAAA0B,EAAAC,GACAH,EAAAI,WAAAH,EAAAzB,IACA0B,QAAAA,EACAC,SAAAA,KAGAE,IAAA,SAAA7B,GACA,MAAAyB,GAAAzB,IAIA,OAAAR,MClBAJ,iBAAAmC,QAAA,uBAAA,KAAA,UAAA,SAAAO,EAAAvC,GAEA,GAAAwC,GAAAD,EAAAE,QAEAC,GAAA,EAEApB,GAEAM,MAAA,KAEAF,OAAA,WACA,MAAAgB,GACAF,EAAAG,SAGAD,GAAA,EAEA1C,EAAA4B,MAAA,SAAAgB,EAAAC,EAAAC,GACA,GAAAC,GAAAC,EAAAJ,EAAAK,qBAAAJ,GAAA,GACAK,EAAAlD,EAAA4B,SACA,KAAAgB,EAAAO,eAAAL,GASA,MARAC,GAAAH,EAAAQ,cAAAP,GACAE,EAAAD,GAAAA,EACAC,EAAAM,IAAA,0CACAL,EAAAzC,WAAA+C,aAAAP,EAAAC,GACAE,EAAAK,MACAL,EAAAM,MAAA,SAAAC,GACAP,EAAAK,GAAA3C,KAAA6C,IAEAP,GACAQ,SAAA,SAAA,eAEA1D,EAAA4B,MAAA4B,MAAAjC,KAAAoC,YAEAnB,EAAAG,UAGAgB,WAAA,SAAA/B,GACAN,EAAAM,MAAAA,EACAY,EAAAoB,QAAAtC,EAAAM,QAKA,OAAAN","file":"twitterApp.min.js","sourcesContent":["var twitterApp = angular.module('twitterApp',[]);","socialTwitterApp.directive('socialTwitter', function(Twitter, $window, TwitterEmitter) {\n\n  return {\n    scope: {\n      'options': '=socialTwitter'\n    },\n    link: function(scope, el, attrs) {\n      Twitter.loadWidget(el[0].parentNode);\n      var urlParameters = [];\n      for (var key in scope.options) {\n        var encoded = $window.encodeURIComponent(scope.options[key]);\n        urlParameters.push(`${key}=${encoded}`);\n      }\n      var urlParametersString = urlParameters.join('&');\n\n      var url = `https://twitter.com/intent/tweet?${urlParametersString}`;\n      el[0].setAttribute('href', url);\n      Twitter.bind('tweet', function(e) {\n        if (e.target === el[0]) {\n          TwitterEmitter.broadcast('tweet', true, e);\n        }\n      });\n    }\n  };\n\n});","socialTwitterApp.service('Twitter', function(TwitterScriptLoader, TwitterEmitter, $window) {\n\n  this.bind = function(eventName, cb) {\n    TwitterScriptLoader.attach()\n      .then(function(twttr) {\n        twttr.events.bind(eventName, cb);\n      });\n  };\n\n  this.loadWidget = function(el) {\n    TwitterScriptLoader.attach()\n      .then(function(twttr) {\n        twttr.widgets.load(el);\n      });\n  };\n\n});","socialTwitterApp.factory('TwitterEmitter', function($rootScope) {\n\n  var _createEventName = function(key) {\n    return `social.twitter.${key}`;\n  };\n\n  var TwitterEmitter = {\n    broadcast: function(key, success, response) {\n      $rootScope.$broadcast(_createEventName(key), {\n        success: success,\n        response: response\n      });\n    },\n    get: function(key) {\n      return _createEventName(key);\n    }\n  };\n\n  return TwitterEmitter;\n\n});","socialTwitterApp.factory('TwitterScriptLoader', function($q, $window) {\n\n  var attachDeferred = $q.defer();\n\n  var attached = false;\n\n  var TwitterScriptLoader = {\n\n    twttr: null,\n\n    attach: function() {\n      if (attached) {\n        return attachDeferred.promise;\n      }\n\n      attached = true;\n\n      $window.twttr = (function(d, s, id) {\n        var js, fjs = d.getElementsByTagName(s)[0],\n            t = $window.twttr || {};\n        if (d.getElementById(id)) return;\n        js = d.createElement(s);\n        js.id = id;\n        js.src = 'https://platform.twitter.com/widgets.js';\n        fjs.parentNode.insertBefore(js, fjs);\n        t._e = [];\n        t.ready = function(f) {\n          t._e.push(f);\n        };\n        return t;\n      }(document, 'script', 'twitter-wjs'));\n\n      $window.twttr.ready(this.initialize);\n\n      return attachDeferred.promise;\n    },\n\n    initialize: function(twttr) {\n      TwitterScriptLoader.twttr = twttr;\n      attachDeferred.resolve(TwitterScriptLoader.twttr);\n    }\n\n  };\n\n  return TwitterScriptLoader;\n});"],"sourceRoot":"/source/"}