{"version":3,"sources":["__generated__/twitterApp.js","directives/socialTwitter.js","services/Twitter.js","services/TwitterEmitter.js","services/TwitterScriptLoader.js"],"names":[],"mappings":"AAAA;AAAA,IAAA,aAAA,QAAA,OAAA,cAAA;ACAA,iBAAA,UAAA,0DAAA,SAAA,SAAA,SAAA,gBAAA;EAEA,OAAA;IACA,OACA,CAAA,WAAA;IAEA,MAAA,SAAA,OAAA,IAAA,OAAA;MACA,QAAA,WAAA,GAAA,GAAA;MACA,IAAA,gBAAA;MACA,KAAA,IAAA,OAAA,MAAA,SAAA;QACA,IAAA,UAAA,QAAA,mBAAA,MAAA,QAAA;QACA,cAAA,MAAA,MAAA,MAAA;;MAEA,IAAA,sBAAA,cAAA,KAAA;MAEA,IAAA,OAAA,sCAAA;MACA,GAAA,GAAA,aAAA,QAAA;MACA,QAAA,KAAA,SAAA,SAAA,GAAA;QACA,IAAA,EAAA,WAAA,GAAA,IAAA;UACA,eAAA,UAAA,SAAA,MAAA;;;;;;ACnBA,iBAAA,QAAA,gEAAA,SAAA,qBAAA,gBAAA,SAAA;EAEA,KAAA,OAAA,SAAA,WAAA,IAAA;IACA,oBAAA,SAAA,KACA,SAAA,OAAA;MACA,MAAA,OAAA,KAAA,WAAA;;;EAIA,KAAA,aAAA,SAAA,IAAA;IACA,oBAAA,SAAA,KACA,SAAA,OAAA;MACA,MAAA,QAAA,KAAA;;;;ACZA,iBAAA,QAAA,iCAAA,SAAA,YAAA;EAEA,IAAA,mBAAA,SAAA,KAAA;IACA,QAAA,oBAAA;;EAGA,IAAA,iBAAA;IACA,WAAA,SAAA,KAAA,SAAA,UAAA;MACA,WAAA,WAAA,iBAAA,MAAA;QACA,SAAA;QACA,UAAA;;;IAGA,KAAA,SAAA,KAAA;MACA,OAAA,iBAAA;;;EAIA,OAAA;;AClBA,iBAAA,QAAA,yCAAA,SAAA,IAAA,SAAA;EAEA,IAAA,iBAAA,GAAA;EAEA,IAAA,WAAA;EAEA,IAAA,sBAAA;IAEA,OAAA;IAEA,QAAA,WAAA;MACA,IAAA,UAAA;QACA,OAAA,eAAA;;MAGA,WAAA;MAEA,IAAA,CAAA,QAAA,OAAA;QACA,QAAA,SAAA,SAAA,GAAA,GAAA,IAAA;UACA,IAAA;cAAA,MAAA,EAAA,qBAAA,GAAA;cACA,IAAA,QAAA,SAAA;UACA,IAAA,EAAA,eAAA;YAAA;UACA,KAAA,EAAA,cAAA;UACA,GAAA,KAAA;UACA,GAAA,MAAA;UACA,IAAA,WAAA,aAAA,IAAA;UACA,EAAA,KAAA;UACA,EAAA,QAAA,SAAA,GAAA;YACA,EAAA,GAAA,KAAA;;UAEA,OAAA;UACA,UAAA,UAAA;;MAGA,QAAA,MAAA,MAAA,KAAA;MAEA,OAAA,eAAA;;IAGA,YAAA,SAAA,OAAA;MACA,oBAAA,QAAA;MACA,eAAA,QAAA,oBAAA;;;EAKA,OAAA;;AACA","file":"twitterApp.min.js","sourcesContent":["var twitterApp = angular.module('twitterApp',[]);","socialTwitterApp.directive('socialTwitter', function(Twitter, $window, TwitterEmitter) {\n\n  return {\n    scope: {\n      'options': '=socialTwitter'\n    },\n    link: function(scope, el, attrs) {\n      Twitter.loadWidget(el[0].parentNode);\n      var urlParameters = [];\n      for (var key in scope.options) {\n        var encoded = $window.encodeURIComponent(scope.options[key]);\n        urlParameters.push(`${key}=${encoded}`);\n      }\n      var urlParametersString = urlParameters.join('&');\n\n      var url = `https://twitter.com/intent/tweet?${urlParametersString}`;\n      el[0].setAttribute('href', url);\n      Twitter.bind('tweet', function(e) {\n        if (e.target === el[0]) {\n          TwitterEmitter.broadcast('tweet', true, e);\n        }\n      });\n    }\n  };\n\n});","socialTwitterApp.service('Twitter', function(TwitterScriptLoader, TwitterEmitter, $window) {\n\n  this.bind = function(eventName, cb) {\n    TwitterScriptLoader.attach()\n      .then(function(twttr) {\n        twttr.events.bind(eventName, cb);\n      });\n  };\n\n  this.loadWidget = function(el) {\n    TwitterScriptLoader.attach()\n      .then(function(twttr) {\n        twttr.widgets.load(el);\n      });\n  };\n\n});","socialTwitterApp.factory('TwitterEmitter', function($rootScope) {\n\n  var _createEventName = function(key) {\n    return `social.twitter.${key}`;\n  };\n\n  var TwitterEmitter = {\n    broadcast: function(key, success, response) {\n      $rootScope.$broadcast(_createEventName(key), {\n        success: success,\n        response: response\n      });\n    },\n    get: function(key) {\n      return _createEventName(key);\n    }\n  };\n\n  return TwitterEmitter;\n\n});","socialTwitterApp.factory('TwitterScriptLoader', function($q, $window) {\n\n  var attachDeferred = $q.defer();\n\n  var attached = false;\n\n  var TwitterScriptLoader = {\n\n    twttr: null,\n\n    attach: function() {\n      if (attached) {\n        return attachDeferred.promise;\n      }\n\n      attached = true;\n\n      if (!$window.twttr) {\n        $window.twttr = (function(d, s, id) {\n          var js, fjs = d.getElementsByTagName(s)[0],\n              t = $window.twttr || {};\n          if (d.getElementById(id)) return;\n          js = d.createElement(s);\n          js.id = id;\n          js.src = 'https://platform.twitter.com/widgets.js';\n          fjs.parentNode.insertBefore(js, fjs);\n          t._e = [];\n          t.ready = function(f) {\n            t._e.push(f);\n          };\n          return t;\n        }(document, 'script', 'twitter-wjs'));\n      }\n\n      $window.twttr.ready(this.initialize);\n\n      return attachDeferred.promise;\n    },\n\n    initialize: function(twttr) {\n      TwitterScriptLoader.twttr = twttr;\n      attachDeferred.resolve(TwitterScriptLoader.twttr);\n    }\n\n  };\n\n  return TwitterScriptLoader;\n});"],"sourceRoot":"/source/"}